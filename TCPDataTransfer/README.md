1、禁用 Nagle 算法，减少延迟。
Nagle 会把小包攒起来一起发，提高带宽利用率，但会增加延迟。

2、设置发送缓冲区大小为 1MB，提高大数据量传输效率。
调大内核的 发送缓冲区（默认可能只有 64KB），适合文件/视频传输。

3、将套接字设置为非阻塞模式，防止发送操作阻塞。
非阻塞模式下，发送操作会立即返回，适合实时应用。

4、设置发送超时为 3 秒，防止长时间阻塞。
限制 send() 阻塞的最长时间，仅对阻塞 socket 有效，当前非阻塞模式其实基本不会触发

5、允许地址重用，避免地址占用问题。
地址快速复用，比如刚关闭 socket 仍在 TIME_WAIT 时能立刻再次绑定。发送端用处不大，但无害。

6、允许绑定到没有端口的地址，增加灵活性。
降低端口冲突的概率。
提高大规模客户端（成百上千连接）的创建速度。

7、一个服务器可以创建多少个连接？
理论上，Linux 下一个进程可以打开的文件描述符数（包括 socket）上限是 65535（2^16 - 1），但实际受限于系统资源。
Linux 下默认单进程 ulimit -n 是 1024，也就是一个进程最多同时打开 1024 个 FD（包括文件、管道、socket），/etc/security/limits.conf 可以修改这个值。

8、端口数量限制（影响客户端连接数）
服务端监听某个端口（比如 80），理论上可以接受来自不同客户端的无限连接，但每个客户端连接会占用一个本地临时端口（ephemeral port）。
Linux 下默认临时端口范围是 32768 - 60999（大约 28231 个端口），可以通过 /proc/sys/net/ipv4/ip_local_port_range 修改：sysctl -w net.ipv4.ip_local_port_range="1024 65535"

如果有大量客户端连接，可能会因为临时端口耗尽而无法建立新连接。
所以一个服务器理论上能支持的最大连接数 = ulimit -n 和 临时端口数量 的较小值。

9、调度
需要用epoll等高效的IO多路复用方式来调度这些连接，否则单线程select/poll在成千上万连接时会非常慢。

10、经验值
单机、优化过内核参数的 Linux 服务器：

普通配置：几千到几万连接

调优后（大内存 + epoll + 调整内核参数）：10万~50万连接

极限压测：百万连接（大内存 + 高性能网卡 + 专门内核调优）